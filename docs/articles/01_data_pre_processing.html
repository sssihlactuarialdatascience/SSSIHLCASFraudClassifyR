<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="SSSIHLCASFraudClassifyR">
<title>Data Pre-processing • SSSIHLCASFraudClassifyR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Pre-processing">
<meta property="og:description" content="SSSIHLCASFraudClassifyR">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SSSIHLCASFraudClassifyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/SSSIHLCASFraudClassifyR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01_data_pre_processing.html">Data Pre-processing</a>
    <a class="dropdown-item" href="../articles/02_mapping_triggers_to_data.html">Mapping Triggers to Data</a>
    <a class="dropdown-item" href="../articles/03_fraud_classification_decision_trees.html">Fraud Classification with Decision Trees</a>
    <a class="dropdown-item" href="../articles/04_fraud_classification_glm.html">Fraud Classification with GLM</a>
    <a class="dropdown-item" href="../articles/05_fraud_classification_naive_bayes.html">Fraud Classification with Naive Bayes</a>
    <a class="dropdown-item" href="../articles/06_fraud_classification_random_forest.html">Fraud Classification with Random Forest</a>
    <a class="dropdown-item" href="../articles/07_fraud_classification_xg_boost.html">Fraud Classification with XG Boost</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data Pre-processing</h1>
            
      
      
      <div class="d-none name"><code>01_data_pre_processing.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we demonstrate how a claims data set can be loaded
and pre-processed to adjust for data imbalance.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">smotefamily</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://github.com/ncordon/imbalance" class="external-link">imbalance</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ROSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wrathematics/coop" class="external-link">coop</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/topepo/caret/" class="external-link">caret</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/radiant-rstats/radiant.data/" class="external-link">radiant.data</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glmnet.stanford.edu" class="external-link">glmnet</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>scipen<span class="op">=</span><span class="fl">999</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="preparing-input-data">Preparing Input Data<a class="anchor" aria-label="anchor" href="#preparing-input-data"></a>
</h2>
<div class="section level3">
<h3 id="loading-data-and-reducing-dimensionality-of-character-columns">Loading data and Reducing Dimensionality of character columns<a class="anchor" aria-label="anchor" href="#loading-data-and-reducing-dimensionality-of-character-columns"></a>
</h3>
<ul>
<li><p>We remove the columns that do not contribute in predicting the
fraud.</p></li>
<li><p>In columns with too many categories (for ex.
medical_service_provider_id) only the top values which contributed the
most were considered and remaining categories were taken as one
category. This had to be done since encoding such categorical columns
would bloat the data set.</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## Considering top 20 unique values from certain columns with large unique values</span></span>
<span></span>
<span><span class="co"># medical service provider id</span></span>
<span><span class="va">mspid</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">claims_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">medical_service_provider_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">mspid</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">mspid</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.3289588</span></span>
<span></span>
<span></span>
<span><span class="st">"</span></span>
<span><span class="st">The code creates data_wo_triggers by copying claims_dataset, replacing medical_service_provider_id values that are not in the top 20 with \"Others\",and removing columns such as insured_id and primary_diagnosis_code.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThe code creates data_wo_triggers by copying claims_dataset, replacing medical_service_provider_id values that are not in the top 20 with \"Others\",and removing columns such as insured_id and primary_diagnosis_code.\n"</span></span>
<span><span class="co"># removing features that do not contribute in predicting fraud</span></span>
<span><span class="va">data_wo_triggers</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">claims_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    medical_service_provider_id <span class="op">=</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>        <span class="va">medical_service_provider_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span></span>
<span>          <span class="va">mspid</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">1</span><span class="op">]</span><span class="op">$</span><span class="va">medical_service_provider_id</span>,</span>
<span>        <span class="va">medical_service_provider_id</span>,</span>
<span>        <span class="st">"Others"</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="va">insured_id</span>,</span>
<span>      <span class="va">primary_diagnosis_code</span>,</span>
<span>      <span class="va">treatment_start_date</span>,</span>
<span>      <span class="va">treatment_end_date</span>,</span>
<span>      <span class="va">policy_commencement_date</span>,</span>
<span>      <span class="va">policy_termination_date</span>,</span>
<span>      <span class="va">claim_reported_date</span>,</span>
<span>      <span class="va">claim_count_pa</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="feature-scaling">Feature scaling<a class="anchor" aria-label="anchor" href="#feature-scaling"></a>
</h3>
<ul>
<li><p>Feature scaling is an important step that helps to make sure all
the input features are on the same scale.</p></li>
<li><p>Some machine learning algorithms assume that all the features
have the same scale, and features with big values might be given more
importantance during the learning process.</p></li>
<li><p>In this data set the columns for the amount, number of days and
age were normalized.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"</span></span>
<span><span class="st">This code normalizes three columns (approved_allowed_amount, no_of_days_stayed, and patient_age) in the data_wo_triggers data frame. The across function applies the same transformation to multiple columns specified with the .cols argument. The mutate function then applies a function which normalizes the values by  subtracting the minimum value from each value and dividing by the range of the column, to each selected column using the .fns argument.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThis code normalizes three columns (approved_allowed_amount, no_of_days_stayed, and patient_age) in the data_wo_triggers data frame. The across function applies the same transformation to multiple columns specified with the .cols argument. The mutate function then applies a function which normalizes the values by  subtracting the minimum value from each value and dividing by the range of the column, to each selected column using the .fns argument.\n"</span></span>
<span><span class="va">data_wo_triggers</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">data_wo_triggers</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>    .cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"approved_allowed_amount"</span>, <span class="st">"no_of_days_stayed"</span>, <span class="st">"patient_age"</span><span class="op">)</span>,</span>
<span>    .fns <span class="op">=</span> <span class="op">~</span> <span class="op">(</span><span class="va">.x</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="performing-one-hot-encoding-to-non-numeric-columns">Performing One Hot Encoding to Non-numeric columns<a class="anchor" aria-label="anchor" href="#performing-one-hot-encoding-to-non-numeric-columns"></a>
</h3>
<ul>
<li><p>In this data set, we had several categorical columns which cannot
be directly used in machine learning models, since machine learning
models usually require numerical inputs.</p></li>
<li><p>Hence one hot encoding is used to convert these categorical
columns into numerical format that can be used in machine learning
models.</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"</span></span>
<span><span class="st">The code creates dummy variables for all the  columns in the data_wo_triggers data frame using the dummyVars function from the caret package. The resulting dummy variables are then used to replace the original columns in data_wo_triggers using the predict function.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThe code creates dummy variables for all the  columns in the data_wo_triggers data frame using the dummyVars function from the caret package. The resulting dummy variables are then used to replace the original columns in data_wo_triggers using the predict function.\n"</span></span>
<span><span class="va">dmy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/dummyVars.html" class="external-link">dummyVars</a></span><span class="op">(</span><span class="st">" ~ ."</span>, data <span class="op">=</span> <span class="va">data_wo_triggers</span>, fullRank <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">data_wo_triggers</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">dmy</span>, newdata <span class="op">=</span> <span class="va">data_wo_triggers</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="checking-correlations-of-columns">Checking correlations of columns<a class="anchor" aria-label="anchor" href="#checking-correlations-of-columns"></a>
</h3>
<ul>
<li><p>We identified and removed highly correlated variables.</p></li>
<li><p>This ensures that only variables which are most relevant to the
target variable are considered.</p></li>
<li><p>This also helps in reducing the dimensionality of the data set
and improve the model’s performance.</p></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"</span></span>
<span><span class="st">The code computes the correlation between variables in the 'data_wo_triggers' data frame, ignoring diagonal and upper triangle elements to avoid duplicate computations. It then converts the correlation matrix to a long format data frame using the 'pivot_longer' function, calculates the absolute correlation value, sorts the correlation values in descending order, and stores the resulting data frame in 'corr'. The filter function removes any correlations equal to zero.</span></span>
<span><span class="st"></span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThe code computes the correlation between variables in the 'data_wo_triggers' data frame, ignoring diagonal and upper triangle elements to avoid duplicate computations. It then converts the correlation matrix to a long format data frame using the 'pivot_longer' function, calculates the absolute correlation value, sorts the correlation values in descending order, and stores the resulting data frame in 'corr'. The filter function removes any correlations equal to zero.\n\n"</span></span>
<span><span class="va">corr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">)</span></span>
<span></span>
<span><span class="va">corr</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">upper.tri</a></span><span class="op">(</span><span class="va">corr</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">corr</span><span class="op">)</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="va">corr</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">corr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rownames_to_column</a></span><span class="op">(</span><span class="st">"colnames_1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="op">-</span><span class="va">colnames_1</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"colnames"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"correlation"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>correlation_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">correlation</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">correlation_1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">correlation_1</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="st">"</span></span>
<span><span class="st">The code creates a vector drop which has the names of the columns with correlation coefficient greater than 0.7 and  it then removes the columns in drop from data_wo_triggers.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThe code creates a vector drop which has the names of the columns with correlation coefficient greater than 0.7 and  it then removes the columns in drop from data_wo_triggers.\n"</span></span>
<span><span class="co">#selecting features to drop that are highly correlated</span></span>
<span><span class="va">drop</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">corr</span>, <span class="va">correlation_1</span> <span class="op">&gt;</span> <span class="fl">0.7</span> , select <span class="op">=</span> <span class="va">colnames</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data_wo_triggers</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">data_wo_triggers</span><span class="op">[</span>,<span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">drop</span><span class="op">$</span><span class="va">colnames</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<div class="section level4">
<h4 id="lasso-regression-to-remove-non-influential-features-in-predicting-fraud">Lasso regression to remove non-influential features in predicting
fraud<a class="anchor" aria-label="anchor" href="#lasso-regression-to-remove-non-influential-features-in-predicting-fraud"></a>
</h4>
<ul>
<li><p>In this case , since there are a large number of features, and
some of them may not be relevant or may have little influence on the
target variable, Lasso regression was used</p></li>
<li><p>This helps to improve model accuracy, reduce overfitting and
identify important features by removing non-influential
features.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"</span></span>
<span><span class="st">The code uses cross-validation to find the optimal lambda value for a generalized linear model with LASSO regularization, using the glmnet package. It then creates a plot of the mean-squared error for each value of lambda.The code then fits a new model using the optimal lambda value and retrieves the coefficients. It selects the features with non-zero coefficients and orders them by absolute value. If there are more than 30 features with non-zero coefficients, it keeps only the top 30. Finally, it subsets the original data frame to include only the selected features and the target variable 'fraud'.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThe code uses cross-validation to find the optimal lambda value for a generalized linear model with LASSO regularization, using the glmnet package. It then creates a plot of the mean-squared error for each value of lambda.The code then fits a new model using the optimal lambda value and retrieves the coefficients. It selects the features with non-zero coefficients and orders them by absolute value. If there are more than 30 features with non-zero coefficients, it keeps only the top 30. Finally, it subsets the original data frame to include only the selected features and the target variable 'fraud'.\n"</span></span>
<span></span>
<span><span class="co">#perform k-fold cross-validation to find optimal lambda value</span></span>
<span><span class="va">cv_model</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://glmnet.stanford.edu/reference/cv.glmnet.html" class="external-link">cv.glmnet</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.matrix.html" class="external-link">data.matrix</a></span><span class="op">(</span><span class="va">data_wo_triggers</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fraud"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            <span class="va">data_wo_triggers</span><span class="op">$</span><span class="va">fraud</span>,</span>
<span>            alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#find optimal lambda value that minimizes test MSE</span></span>
<span><span class="va">best_lambda</span> <span class="op">=</span> <span class="va">cv_model</span><span class="op">$</span><span class="va">lambda.min</span></span>
<span></span>
<span><span class="co">#produce plot of test MSE by lambda value</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cv_model</span><span class="op">)</span></span></code></pre></div>
<p><img src="01_data_pre_processing_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#find coefficients of best model</span></span>
<span><span class="va">best_model</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://glmnet.stanford.edu/reference/glmnet.html" class="external-link">glmnet</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/data.matrix.html" class="external-link">data.matrix</a></span><span class="op">(</span><span class="va">data_wo_triggers</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fraud"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">data_wo_triggers</span><span class="op">$</span><span class="va">fraud</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    lambda <span class="op">=</span> <span class="va">best_lambda</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">k</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">best_model</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">k</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">k</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="va">k</span> <span class="op">=</span> <span class="va">k</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rownames_to_column</a></span><span class="op">(</span><span class="st">"feature"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">k</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">k</span><span class="op">)</span> <span class="op">==</span> <span class="st">'k[-1, ]'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">'coeff'</span></span>
<span><span class="va">k</span> <span class="op">=</span> <span class="va">k</span><span class="op">[</span><span class="va">k</span><span class="op">$</span><span class="va">coeff</span> <span class="op">!=</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span><span class="va">k</span> <span class="op">=</span> <span class="va">k</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">k</span><span class="op">$</span><span class="va">coeff</span><span class="op">)</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">k</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">30</span><span class="op">)</span></span>
<span>  <span class="va">k</span> <span class="op">=</span> <span class="va">k</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">30</span>, <span class="op">]</span></span>
<span><span class="va">data_wo_triggers</span> <span class="op">=</span> <span class="va">data_wo_triggers</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">k</span><span class="op">$</span><span class="va">feature</span>, <span class="st">"fraud"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="checking-for-class-data-imbalance">Checking for class data Imbalance<a class="anchor" aria-label="anchor" href="#checking-for-class-data-imbalance"></a>
</h3>
<ul>
<li><p>Since fraud is a rare occurrence, the proportion of fraud cases
is much lesser than that of non fraud cases.</p></li>
<li><p>We first check for the presence of such class imbalance in this
dataset.</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"</span></span>
<span><span class="st">The code performs class distribution analysis on the data_wo_triggers dataset. It prints the summary statistics of the fraud variable and plots a bar chart of its distribution.The y-axis is set to a range of 0 to 1.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThe code performs class distribution analysis on the data_wo_triggers dataset. It prints the summary statistics of the fraud variable and plots a bar chart of its distribution.The y-axis is set to a range of 0 to 1.\n"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt; 0.00000 0.00000 0.00000 0.02988 0.00000 1.00000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">rainbow</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Class Distribution"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="01_data_pre_processing_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>There is evidence to suggest the existence class data imbalance</p>
</div>
<div class="section level3">
<h3 id="splitting-train-and-test-set">Splitting Train and Test set<a class="anchor" aria-label="anchor" href="#splitting-train-and-test-set"></a>
</h3>
<ul>
<li><p>Splitting a dataset into a training set and a test set is crucial
to evaluate the performance of a model on new, unseen data.</p></li>
<li><p>The training set is used to train the model, while the test set
is used to evaluate its performance.</p></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"</span></span>
<span><span class="st">The code creates data_wo_triggers_train and data_wo_triggers_test by randomly sampling 70% of the rows in data_wo_triggers as the Training Set and the remaining 30% as the Test Set. The seed is set to 123 to ensure reproducibility.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nThe code creates data_wo_triggers_train and data_wo_triggers_test by randomly sampling 70% of the rows in data_wo_triggers as the Training Set and the remaining 30% as the Test Set. The seed is set to 123 to ensure reproducibility.\n"</span></span>
<span></span>
<span><span class="co"># randomly split data in r</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">TrainingIndex</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">)</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">0.7</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data_wo_triggers_train</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">data_wo_triggers</span><span class="op">[</span><span class="va">TrainingIndex</span>, <span class="op">]</span> <span class="co"># Training Set</span></span>
<span><span class="va">data_wo_triggers_test</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">data_wo_triggers</span><span class="op">[</span><span class="op">-</span><span class="va">TrainingIndex</span>, <span class="op">]</span> <span class="co"># Test Set</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adjusting-data-for-imbalance">Adjusting data for imbalance<a class="anchor" aria-label="anchor" href="#adjusting-data-for-imbalance"></a>
</h3>
<ul>
<li><p>As seen above, there is a class imbalance in this
dataset.</p></li>
<li><p>Adjusting the data for the imbalance is necessary in order to
ensure that the machine learning models are not biased towards the
majority class.</p></li>
<li><p>We used oversampling methods to handle the data imbalance to
ensure that there is no loss of data.</p></li>
</ul>
<p><strong>In brief about the methods used:</strong></p>
<ul>
<li><p>ADASYN(Adaptive Synthetic Sampling) generates synthetic data
points for the minority class in imbalanced datasets, creating more
samples in underrepresented regions to improve model
performance.</p></li>
<li><p>SMOTE (Synthetic Minority Over-sampling Technique) generates
synthetic data points for the minority class in imbalanced datasets by
interpolating between minority class examples to create new
samples.</p></li>
<li><p>MWMOTE(Majority Weighted Minority Oversampling Technique) is a
modification of SMOTE that aims to address the issue of noisy examples
by adding a weighting factor to each minority class example based on its
level of noise.</p></li>
<li><p>ROSE (Random Over-Sampling Examples) generates synthetic data
points for the minority class by randomly selecting a sample from the
minority class.</p></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"</span></span>
<span><span class="st">A new dataset newData is created using the ADASYN algorithm with data_wo_triggers_train as input. The resulting dataset is assigned to adasyn_wo_triggers_train, and the number of fraud and non-fraud observations is printed.</span></span>
<span><span class="st"></span></span>
<span><span class="st">Similarly, adasyn_wo_triggers_test is created using the ADASYN algorithm with data_wo_triggers_test as input. The resulting dataset is assigned to adasyn_wo_triggers_test, and the number of fraud and non-fraud observations is printed.</span></span>
<span><span class="st"></span></span>
<span><span class="st">Similary it is done using SMOTE,MWMOTE and ROSE.</span></span>
<span><span class="st">"</span></span>
<span><span class="co">#&gt; [1] "\nA new dataset newData is created using the ADASYN algorithm with data_wo_triggers_train as input. The resulting dataset is assigned to adasyn_wo_triggers_train, and the number of fraud and non-fraud observations is printed.\n\nSimilarly, adasyn_wo_triggers_test is created using the ADASYN algorithm with data_wo_triggers_test as input. The resulting dataset is assigned to adasyn_wo_triggers_test, and the number of fraud and non-fraud observations is printed.\n\nSimilary it is done using SMOTE,MWMOTE and ROSE.\n"</span></span></code></pre></div>
<div class="section level4">
<h4 id="adasyn">ADASYN<a class="anchor" aria-label="anchor" href="#adasyn"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">newData</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/smotefamily/man/adas.html" class="external-link">ADAS</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">data_wo_triggers_train</span>,</span>
<span>       <span class="va">data_wo_triggers_train</span><span class="op">$</span><span class="va">fraud</span>,</span>
<span>       K <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adasyn_wo_triggers_train</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">newData</span><span class="op">$</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"class"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adasyn_wo_triggers_train</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   fraud count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0     <span style="text-decoration: underline;">74</span>126</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1     <span style="text-decoration: underline;">74</span>110</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">adasyn_wo_triggers_test</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/smotefamily/man/adas.html" class="external-link">ADAS</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">data_wo_triggers_test</span>,</span>
<span>       <span class="va">data_wo_triggers_test</span><span class="op">$</span><span class="va">fraud</span>,</span>
<span>       K <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">$</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"class"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adasyn_wo_triggers_test</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   fraud count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0     <span style="text-decoration: underline;">31</span>804</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1     <span style="text-decoration: underline;">31</span>830</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="smote">SMOTE<a class="anchor" aria-label="anchor" href="#smote"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers_train</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">data_wo_triggers_train</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 33.10307</span></span>
<span></span>
<span><span class="va">smote_wo_triggers_train</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/smotefamily/man/SMOTE.html" class="external-link">SMOTE</a></span><span class="op">(</span></span>
<span>    <span class="va">data_wo_triggers_train</span>,</span>
<span>    <span class="va">data_wo_triggers_train</span><span class="op">$</span><span class="va">fraud</span> ,</span>
<span>    K <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    dup_size <span class="op">=</span> <span class="fl">18</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"class"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">smote_wo_triggers_train</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   fraud count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0     <span style="text-decoration: underline;">74</span>126</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1     <span style="text-decoration: underline;">43</span>871</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers_test</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">data_wo_triggers_test</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 34.33753</span></span>
<span></span>
<span><span class="va">smote_wo_triggers_test</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/smotefamily/man/SMOTE.html" class="external-link">SMOTE</a></span><span class="op">(</span></span>
<span>    <span class="va">data_wo_triggers_test</span>,</span>
<span>    <span class="va">data_wo_triggers_test</span><span class="op">$</span><span class="va">fraud</span> ,</span>
<span>    K <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    dup_size <span class="op">=</span> <span class="fl">18</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"class"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">smote_wo_triggers_test</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   fraud count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0     <span style="text-decoration: underline;">31</span>804</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1     <span style="text-decoration: underline;">18</span>126</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="mwmote">MWMOTE<a class="anchor" aria-label="anchor" href="#mwmote"></a>
</h4>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">mwmote_wo_triggers_train</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/imbalance/man/mwmote.html" class="external-link">mwmote</a></span><span class="op">(</span></span>
<span>    dataset <span class="op">=</span> <span class="va">data_wo_triggers_train</span>,</span>
<span>    numInstances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers_train</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">data_wo_triggers_train</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span>,</span>
<span>    classAttr <span class="op">=</span> <span class="st">"fraud"</span>,</span>
<span>    kNoisy <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    kMajority <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    kMinority <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    threshold <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    cmax <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    cclustering <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mwmote_wo_triggers_train</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   fraud  count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0     <span style="text-decoration: underline;">105</span>930</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1      <span style="text-decoration: underline;">75</span>080</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mwmote_wo_triggers_test</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/imbalance/man/mwmote.html" class="external-link">mwmote</a></span><span class="op">(</span></span>
<span>    dataset <span class="op">=</span> <span class="va">data_wo_triggers_test</span>,</span>
<span>    numInstances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers_test</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">data_wo_triggers_test</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span>,</span>
<span>    classAttr <span class="op">=</span> <span class="st">"fraud"</span>,</span>
<span>    kNoisy <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    kMajority <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    kMinority <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    threshold <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    cmax <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    cclustering <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">data_wo_triggers</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mwmote_wo_triggers_test</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   fraud  count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0     <span style="text-decoration: underline;">105</span>930</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1      <span style="text-decoration: underline;">34</span>113</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="rose">ROSE<a class="anchor" aria-label="anchor" href="#rose"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#chose seed 100</span></span>
<span><span class="co">#The N variable is the total number that will be generated</span></span>
<span><span class="co">#N should essentially be sum of both fraud and non fraud</span></span>
<span><span class="va">rose_wo_triggers_train</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/ROSE/man/ovun.sample.html" class="external-link">ovun.sample</a></span><span class="op">(</span></span>
<span>    <span class="va">fraud</span> <span class="op">~</span> <span class="va">.</span> ,</span>
<span>    data <span class="op">=</span> <span class="va">data_wo_triggers_train</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"over"</span>,</span>
<span>    N <span class="op">=</span> <span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers_train</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">data_wo_triggers_train</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">*</span> <span class="fl">2</span>,</span>
<span>    seed <span class="op">=</span> <span class="fl">100</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rose_wo_triggers_train</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     0     1 </span></span>
<span><span class="co">#&gt; 74126 74126</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rose_wo_triggers_train</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">rainbow</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Class Distribution"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="01_data_pre_processing_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#chose seed 100</span></span>
<span><span class="co">#The N variable is the total number that will be generated</span></span>
<span><span class="co">#N should essentially be sum of both fraud and non fraud</span></span>
<span><span class="va">rose_wo_triggers_test</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/ROSE/man/ovun.sample.html" class="external-link">ovun.sample</a></span><span class="op">(</span></span>
<span>    <span class="va">fraud</span> <span class="op">~</span> <span class="va">.</span> ,</span>
<span>    data <span class="op">=</span> <span class="va">data_wo_triggers_test</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"over"</span>,</span>
<span>    N <span class="op">=</span> <span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_wo_triggers_test</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">data_wo_triggers_test</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">*</span> <span class="fl">2</span>,</span>
<span>    seed <span class="op">=</span> <span class="fl">100</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>fraud <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rose_wo_triggers_test</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     0     1 </span></span>
<span><span class="co">#&gt; 31804 31804</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rose_wo_triggers_test</span><span class="op">$</span><span class="va">fraud</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">rainbow</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Class Distribution"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="01_data_pre_processing_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>In this vignette, We pre-processed the claims data set and generated
train and test data sets that were adjusted for data imbalance using the
methods ADASYN,SMOTE,MWMOTE,ROSE. We will use these in other vignettes
to fit machine learning models for fraud classification</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by SSSIHL -DMACS.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
